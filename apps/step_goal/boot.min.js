let step_goal=function(){let health_settings=require("Storage").readJSON("health.json",1)||{},settings=Object.assign({goal_enabled:!0,reminder_enabled:!0,reminder_start_time:9,reminder_stop_time:21,has_triggered:!1,reminder_minute:50},require("Storage").readJSON("step_goal.json",!0)||{}),setSettings=function(){require("Storage").writeJSON("step_goal.json",settings)},steps_per_hour=function(e,t,s){return Math.ceil(e/(s-t))},needed_steps=function(e,t,s,r,n){return steps_per_hour(t,s,r)*(n-s)-e},enough_steps=function(e,t,s,r,n){let _=needed_steps(e,t,s,r,n);return n>=r-1||!(_>0)},step_reminder=function(){settings.reminder_enabled&&(enough_steps(Bangle.getHealthStatus("day").steps,health_settings.stepGoal,settings.reminder_start_time,settings.reminder_stop_time,(new Date).getHours())?console.log("Step_goal: Steps for this hour are met."):(Bangle.setUI(),eval(require("Storage").read("step_goal.show_reminder.js"))),setInterval(step_reminder,36e5))},check_step_goal=function(){settings.has_triggered?Bangle.getHealthStatus("day").steps<=health_settings.stepGoal&&(settings.has_triggered=!1,setSettings()):Bangle.getHealthStatus("day").steps>=health_settings.stepGoal&&1==settings.goal_enabled&&(Bangle.setUI(),eval(require("Storage").read("step_goal.show_goal.js")))},step_goal_reset=function(){let e=Object.assign({goal_enabled:!0,reminder_enabled:!0,reminder_start_time:9,reminder_stop_time:21,has_triggered:!1,reminder_minute:50},require("Storage").readJSON("step_goal.json",!0)||{});e.has_triggered=!1,require("Storage").writeJSON("step_goal.json",e)};Bangle.on("midnight",(function(){step_goal_reset()})),check_step_goal(),setInterval(check_step_goal,6e4);let now=new Date,seconds_left=60-now.getSeconds()+60*(settings.reminder_minute-now.getMinutes());return seconds_left>1&&setTimeout(step_reminder,1e3*seconds_left),{settings:settings,steps_per_hour:steps_per_hour,needed_steps:needed_steps,enough_steps:enough_steps,step_reminder:step_reminder,check_step_goal:check_step_goal,step_goal_reset:step_goal_reset}}();